<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/p5.js"></script>
    <script>
function setup() {
  createCanvas(1200, 600);
}

var mobX = 600;
var mobY = 300;

function draw() {
  background(255, 247, 240);
  fill(127, 198, 0);
  ellipse(mobX, mobY, 80, 80);
  fill(198, 127, 0);
  ellipse(mouseX, mouseY, 40, 40);
}

function greetInit(event) {
  console.log('connection established');
};

function updateServerPosition(event) {
  console.log(event.data);  `
  var msg = JSON.parse(event.data);
  mobX = msg.X;
  mobY = msg.Y;
};

var exampleSocket = new WebSocket("wss://echo.websocket.org");
exampleSocket.onopen = greetInit;
exampleSocket.onmessage = updateServerPosition;

function sendPosition() {
  var msg = {
    X: mouseX,
    Y: mouseY
  };
  exampleSocket.send(JSON.stringify(msg));
}
setInterval(sendPosition, 500);

    </script>
  </head>
  <body>
  </body>
</html>